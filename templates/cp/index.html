{% extends 'cp_base.html' %}
{% load cp_tags %}

{% block extrahead %}
{{ block.super }}
<script>
var caller = 'index';
var brands = [
    {{ brands|safe }}
    ];
</script>

<script type="text/javascript" src="{{ MEDIA_URL }}js/order_processing.js"></script>

<script>
backend_url = '/cp/position/edit/ordered_item/';
get_brandgroup_settings_url = '/cp/get_brandgroup_settings/'
</script>
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/changelists.css" />
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/forms.css" />
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/dashboard.css" />
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/qs_filter.css" />

<style type="text/css">
table td {
    padding: 1px 1px 1px 1px;
    font-size: 80%;
}
input, select {
  font-size: 90%;
}
td.center {
text-align: center;

}

td.right {
text-align: right;
}


.module {
    background: none repeat scroll 0 0 white;
    background: none repeat scroll 0 0 white;
    border: none;
    margin-bottom: 5px;
}

table {
    border: 1px solid #DDD;
}

tr.alt td {
    font-weight: 600;
}

</style>
{% endblock %}

{% block content %}
<div class="" id="changelist">
<form method="{{ filter.method }}" action="/cp/{% if items_per_page %}?items_per_page={{ items_per_page }}{% endif %}">
<a href="/cp/export_order/">Экспорт</a><br/><br/>
<input type="hidden" name="qs_filter" value="1">
<input type="submit" value="Фильтр">
<input type="submit" name="qs_filter_clear" value="Очистить">
Количество записей на странице:
<select onchange="location.href='{{ request.path }}?items_per_page=' + this.value">
<option value="20"{% ifequal items_per_page 20 %} selected {% endifequal %}>20</option>
<option value="50"{% ifequal items_per_page 50 %} selected {% endifequal %}>50</option>
<option value="100"{% ifequal items_per_page 100 %} selected {% endifequal %}>100</option>
</select>

<div class="module" id="changelist">

<table>
<thead>
<tr>{% table_header_sort headers %}</tr>
<tr{% if filter.is_set %} style="border: solid 2px green;"{% endif %}>
{% for f in list_filters %}
<td>{% ifequal f.name 'ponumber' %}<input id="id_brandgroup__direction__po__icontains" type="text" class="qs_filter" name="brandgroup__direction__po__icontains" size="2">{% endifequal %}
{{ f }}</td>
{% endfor %}
</tr>
</thead>
<tbody>
<style>
    table td {padding:1px 5px; vertical-align: middle;}
</style>
{% for i in items %}
  <tr id="table_row_{{ i.id }}" class="{% cycle row1,row2 %} {{ i.status }}">
  {% include "cp/tags/table/row.html" %}
  </tr>
{% endfor %}
{% if total_row %}
    <tr class="alt">
    <td><strong>Итого:</strong></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>{{ total_row.PRICE_IN|default:0|floatformat:3 }}</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td>&nbsp;</td>
    <td>{{ total_row.WEIGHT|default:0|floatformat:3 }}</td>
    <td> {{ total_row.DELIVERY|default:0|floatformat:3 }}</td>
    <td>{{ total_row.PRICE|default:0|floatformat:3 }}</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>{{ total_row.COST|floatformat:".02f" }}</td>
    <td></td>
    <td></td>
    </tr>
{% endif %}
</tbody>
</table>

</div>

</form>

{% include "paginator.html" %}
</div>

{% endblock %}

