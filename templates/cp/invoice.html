{% extends 'cp_base.html' %}
{% load cp_tags %}

{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/forms.css" />
<script>
var caller = 'invoice_item';
</script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/order_processing.js"></script>
<script>
backend_url = '/cp/position/edit/invoice_item/';
</script>
{% endblock %}

{% block extrabody %}class="change-form"{% endblock %}

{% block content %}
<h1>Invoice: {{ invoice.id }}</h1>
<table class="admin_table">
	<tr>
		<th>PO</th>
		<th>part_number</th>
		<th>price</th>
		<th>QTY</th>
	</tr>
	{% for item in invoice.invoiceitem_set.all %}
	<tr>
		<td>{{ item.ordered_item.get_numbered_po }}</td>
		<td>{{ item.ordered_item.part_number }}</td>
		<td class="editable" onclick="editPrice({{ item.id }})">
		    <div id="price_display_{{ item.id }}">{{ item.price|default:"" }}</div>
		    <div id="price_{{ item.id }}" style="display: none">{{ item.price|default:"" }}</div>
		    <span id="price_buttons_{{ item.id }}" style="display: none"><button onclick="save(); return false;">Save</button><button onclick="cancel()">Cancel</button></span>
		</td>
		<td class="editable" onclick="editQuantity({{ item.id }})">
            <div id="quantity_display_{{ item.id }}">{{ item.quantity|default:"" }}</div>
            <div id="quantity_{{ item.id }}" style="display: none">{{ item.quantity|default:"" }}</div>
            <span id="quantity_buttons_{{ item.id }}" style="display: none"><button onclick="save(); return false;">Save</button><button onclick="cancel()">Cancel</button></span>
        </td>
	</tr> 
	{% endfor %}
</table>

<div class="">
<form action="" name="invoice_form" method="post">
<fieldset class="module aligned ">
{% for field in form %}
  <div class="form-row name ">
  {{ field.label_tag }}
  {{ field }}
  </div>

{% endfor %}
</fieldset>
<div class="submit-row">
<input type="submit" name="submit" value="Сохранить" />&nbsp;<input type="submit" name="cancel" value="Вернуться" /> 
</div>
</form>
</div>

{% endblock %}